<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Tweets speaks our Problems</title>

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

	<!-- fontawsome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" src="//normalize-css.googlecode.com/svn/trunk/normalize.css" />

	<style>
		@import url('https://fonts.googleapis.com/css2?family=Noto+Sans:ital@1&display=swap');
		body{
			font-family: 'Noto Sans', sans-serif;
			text-align: center;
		   /*height: 100vh;*/
		}

		.header-div { 
		  font-family: 'Arista', Tahoma, sans-serif;
		  font-weight: bold;
		  font-size: 3.6em;
		  line-height: 1.7em;
		  margin-bottom: 10px;
		  text-align: center;
		  padding: 10px;
		}

		.tweet{
			width: 65%;
			height: 20%;
			margin: 1%;
			display: inline-block;
			padding: 2%;
			border: solid #00000033 1px;
			/*position: relative;*/
			box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2); 
		}

		.tw-loc{
			width: 20%;
			height: 65%;
		    margin: 1%;
		    display: inline-block;
		    padding: 2%;
		    border: solid #00000033 1px;
		    position: relative;
		    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2); 
		}

		.tweet:hover, .tw-loc:hover{
		    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
		}

		.light{
			opacity: 0.5;
		}

		.date{
			float: right;
		}

		.loc{
			float: left;
		}

		@import url('https://fonts.googleapis.com/css2?family=Noto+Sans:ital@1&display=swap');

		.tweets{
		    margin-left: 7%;
		}

		html, body{
		   padding:0px;
		   margin:0px;
		   /*background:#191A1D;*/
		   font-family: 'Karla', sans-serif;
		   width:100vw;
		}
		body * {
		   margin:0;
		   padding:0;
		}
		/* HTML Nav Styles */
		nav span {
		   position:relative;
		   display:block;
		   opacity:0;
		   cursor:pointer;
		}

		nav span > menu {
		   position: absolute;
		   pointer-events:none;
		}
		nav > menu { display:flex; }

		nav > menu > span { pointer-events: all; opacity:1; }
		menu span a { white-space:nowrap; display:block; }
		   
		span:hover > menu {
		   pointer-events:initial;
		}
		span:hover > menu > span,
		menu:hover > span{
		   opacity:1;
		}
		nav > menu > span span menu {
		   transform:translateX(100%);
		   top:0; right:0;
		}

		/* User Styles Below Not Required */

		nav { 
		   margin-top: 40px;
		   margin-left: 40px;
		}

		nav a {
		   background:#ffffff;
		   color:#FFF;
		   min-width:190px;
		   transition: background 0.5s, color 0.5s, transform 0.5s;
		   margin:0px 6px 6px 0px;
		   padding:20px 40px;
		   box-sizing:border-box;
		   border-radius:3px;
		   box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.5);
		   position:relative;
		}

		nav a:hover:before {
		   content: '';
		   top:0;left:0;
		   position:absolute;
		   background:rgba(0, 0, 0, 0.2);
		   width:100%;
		   height:100%;
		}

		nav > menu > span > a + menu:after{
		   content: '';
		   position:absolute;
		   border:10px solid transparent;
		   border-top: 10px solid white;
		   left:12px;
		   top: -40px;  
		}
		nav span > menu > span > a + menu:after{ 
		   content: '';
		   position:absolute;
		   border:10px solid transparent;
		   border-left: 10px solid white;
		   top: 20px;
		   left:-180px;
		   transition: opacity 0.6, transform 0s;
		}

		nav > menu > span > menu > span{
		   transition: transform 0.6s, opacity 0.6s;
		   transform:translateY(150%);
		   opacity:0;
		}
		nav > menu > span:hover > menu > span,
		nav > menu > span.hover > menu > span{
		   transform:translateY(0%);
		   opacity: 1;
		}

		span > menu > span > menu > span{
		   transition: transform 0.6s, opacity 0.6s;
		   transform:translateX(195px) translateY(0%);
		   opacity: 0;
		} 
		span > menu > span:hover > menu > span,  
		span > menu > span.hover > menu > span{  
		   transform:translateX(0) translateY(0%);
		   opacity: 1;
		}

	</style>
	<body>

		<div class="header-div">
			<i class="fa fa-twitter" style="color: #1da1f2"></i>
			<h1 style="display: inline-block;">Tweets speaks our Problems</h1>
			<i class="fa fa-twitter" style="color: #1da1f2"></i>
		</div>

    	<div style="margin-left: 35%; margin-top: -2em">
	        <nav>
	        <menu>
	            <span id="demo1">
	                <a>Filter By Location</a>
	                <menu>
	                    <span onclick="u_loc('Azad Nagar')"><a>Azad Nagar</a></span>
	                    <span onclick="u_loc('Anu Nagar')"><a>Anu Nagar</a></span>
	                    <span onclick="u_loc('Charai')"><a>Charai</a></span>
	                    <span onclick="u_loc('Balkum')"><a>Balkum</a></span>
	                    <span onclick="u_loc('Dhokali Naka')"><a>Dhokali Naka</a></span>
	                </menu>
	            </span>
	            <span>
	                <a id="demo2">Filter By Date</a>
	                <menu>
	                    <span onclick="u_date('old')"><a>Oldest</a></span>
	                    <span onclick="u_date('new')"><a>Newest</a></span>
	                </menu>
	            </span>
	        </menu>
	    	</nav>
	    </div>

	    <br><br><br>

		<section>

			{% for tw in tweets %}
			
					<div class="tweet">
						<span class="name"><b>{{ tw['name'] }}</b></span><br>
						<!-- Not Working -->
			            <span class="user light">{{ tw['username'] }}</span>
						<br><br>{{ tw['tweet'] }}<br><br>
						<span class="loc light">{{ tw['location'] }}</span>
						<span class="date light">{{ tw['date_time'] }}</span>
			        </div>
			
			{% endfor %}
		
	</body>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

	<script type="text/javascript">

		// filter - locations function
		function u_loc(location){

			// let n = document.getElementsByClassName("tweet").length;
			for (var i = 23; i >= 0; i--) {

				document.getElementsByClassName("tweet")[i].style.display = "block";

				// location selected by user
				let each_loc = document.getElementsByClassName("loc")[i].childNodes[0].data;

				// condition to compare location selected by user and locations from tweets
				if (each_loc != location){
					// hide tweets other than selected location
					document.getElementsByClassName("tweet")[i].style.display = "none";
				}
				else{
					document.getElementsByClassName("tweet")[i].style.display = "inline-block"
				}
			}
			
		}



		// function to sort dates
		function u_date(arg) {

			var lst = [];
			for (var i = 23; i >= 0; i--){
				var Dat = document.getElementsByClassName("date")[i].childNodes[0].data;
				var Datees = lst.push(Dat);
			}
			var unique = lst.filter((v, i, a) => a.indexOf(v) === i);
			var n = unique.length;
			unique = unique.sort();


			for(var i = n; i >= 0; i--){

				var curr_date = document.getElementsByClassName("date").childNodes[i].data;

				if(curr_date == unique[i]){
					
				}
			}
		}


		// const reverseDateRepresentation = date => {
		// let parts = date.split('-');
		// 	return `${parts[2]}-${parts[1]}-${parts[0]}`;
		// };

		// var Datees = ['01-02-2018', '02-01-2018', '01-01-2018', '31-12-2017']


		// var sortedDates = Datees.map(reverseDateRepresentation).sort().map(reverseDateRepresentation);

		// console.log(sortedDates);

	</script>

</html>