<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="style.css">

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

	<!-- fontawsome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" src="//normalize-css.googlecode.com/svn/trunk/normalize.css" />

</head>
<body>

	<div class="header-div">
		<i class="fa fa-twitter" style="color: #1da1f2"></i>
		<h1 style="display: inline-block;">Tweets speaks our Problems</h1>
		<i class="fa fa-twitter" style="color: #1da1f2"></i>
	</div>

    <div style="margin-left: 35%; margin-top: -2em">
        <!-- <button>Filter by location</button>
        <button>Filter by date</button> -->
        <nav>
        <menu>
            <menuitem id="demo1">
                <a>Filter By Location</a>
                <menu>
                    <menuitem onclick="locationSort('Panchpakhadi')"><a>Panchpakhadi</a></menuitem>
                    <menuitem onclick="locationSort('Diva')"><a>Diva</a></menuitem>
                    <menuitem><a>Manpada</a></menuitem>
                    <menuitem><a>Indira Nagar</a></menuitem>
                    <menuitem><a>Vartak Nagar</a></menuitem>
                </menu>
            </menuitem>
            <menuitem>
                <a id="demo2">Filter By Date</a>
                <menu>
                    <menuitem><a>Oldest</a></menuitem>
                    <menuitem><a>Newest</a></menuitem>
                </menu>
            </menuitem>
        </menu>
    </nav>
        <!-- <nav>
        <h2>Drop Down Menu</h2>
        <input id="toggle" type="checkbox" checked>
        <ul>
         <li><a href="#">Section 01</a></li>
         <li><a href="#">Section 02</a></li>
         <li><a href="#">Section 03</a></li>
         <li><a href="#">Section 04</a></li>
        </ul>
    </nav> -->
</div>

    <!-- </div> -->


	<section id="tweets" style="text-align: center; height: 100vh;">
        <!-- <div class="tweet">
            <span><b>Niks</b></span><br>
            <span class="light">alien_nik</span><br>
            Hi, its been more than 7 hours thesre is no power supply in my area sector 16 indira nagar, new power house, i called customer care but thry cant update as their system is down since long...who can help?
            <br><br><span class="loc light">Indira Nagar</span><span class="date light">2 May 2020</span>
        </div>
        <div class="tweet">
            <span><b>chacha</b></span><br>
            <span class="light">amaJIN_cha</span><br>
            Gutters are overflowing near panchpakhadi, because of heavy rainfall in the city.
            <br><br><span class="loc light">Panchpakhadi</span><span class="date light">27 Feb 2020</span>
        </div>
		<div class="tweet">
			<span><b>DO</b></span><br>
			<span class="light">dodo_nids</span><br>
			There are no proper streetlights in Manpada TMC should take action.
			<br><br><span class="loc light">Manpada</span><span class="date light">7 Dec 2021</span>
		</div>
        <div class="tweet">
            <span><b>Rakya</b></span><br>
            <span class="light">Paan_rak</span><br>
            All of this happens right on your website! Twitter adds a pop-up window so your visitor never leaves your website or blog post.
            <br><br><span class="loc light">Location</span><span class="date light">4 Jan 2020</span>
        </div>
		<div class="tweet">
			<span><b>Name</b></span><br>
			<span class="light">User_name</span><br>
			What is wrong with the wi-fi in Gurukul Society,Diva???
			<br><br><span class="loc light">Location</span><span class="date light">27 Feb 2020</span>
		</div>
		<div class="tweet">
			<span><b>Name</b></span><br>
			<span class="light">User_name</span><br>
			Hi, its been more than 7 hours thesre is no power supply in my area sector 16 indira nagar, new power house, i called customer care but thry cant update as their system is down since long...who can help?
			<br><br><span class="loc light">Location</span><span class="date light">27 Feb 2020</span>
        </div>
        <div class="tweet">
            <span><b>Name</b></span><br>
            <span class="light">User_name</span><br>
            All of this happens right on your website! Twitter adds a pop-up window so your visitor never leaves your website or blog post.
            <br><br><span class="loc light">Location</span><span class="date light">27 Feb 2020</span>
        </div>
        <div class="tweet">
            <span><b>Name</b></span><br>
            <span class="light">User_name</span><br>
            All of this happens right on your website! Twitter adds a pop-up window so your visitor never leaves your website or blog post.
            <br><br><span class="loc light">Location</span><span class="date light">27 Feb 2020</span>
        </div>
        <div class="tweet">
            <span><b>Name</b></span><br>
            <span class="light">User_name</span><br>
            Hi, its been more than 7 hours thesre is no power supply in my area sector 16 indira nagar, new power house, i called customer care but thry cant update as their system is down since long...who can help?
            <br><br><span class="loc light">Location</span><span class="date light">27 Feb 2020</span>
        </div>
        <div class="tweet">
            <span><b>Name</b></span><br>
            <span class="light">User_name</span><br>
            All of this happens right on your website! Twitter adds a pop-up window so your visitor never leaves your website or blog post.
            <br><br><span class="loc light">Location</span><span class="date light">27 Feb 2020</span>
        </div>
        <div class="tweet">
            <span><b>Name</b></span><br>
            <span class="light">User_name</span><br>
            All of this happens right on your website! Twitter adds a pop-up window so your visitor never leaves your website or blog post.
            <br><br><span class="loc light">Location</span><span class="date light">27 Feb 2020</span>
        </div>
        <div class="tweet">
            <span><b>Name</b></span><br>
            <span class="light">User_name</span><br>
            All of this happens right on your website! Twitter adds a pop-up window so your visitor never leaves your website or blog post.
            <br><br><span class="loc light">Location</span><span class="date light">27 Feb 2020</span>
        </div> -->
	</section>

</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

<script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>

<!-- Custom javascript -->
<!-- <script type="text/javascript" src="crud.js"></script> -->
<!-- <script type="text/javascript" src="work.js"></script> -->

<script type="text/javascript">
    // functions connecting to html code
    const { MongoClient, ServerApiVersion } = require('mongodb');

    // function locationSort(location){

    //     // document.getElementById("tweets");
    //     console.log(location);
    //     main(location).catch(console.error);
    // }


    // const { MongoClient, ServerApiVersion } = require('mongodb');

async function main(location) {
    /**
     * Connection URI. Update <username>, <password>, and <your-cluster-url> to reflect your cluster.
     * See https://docs.mongodb.com/ecosystem/drivers/node/ for more details
     */
    const uri = "mongodb+srv://Rakamni123:lifeisabigjoke123@tweets.drdld.mongodb.net/Data?retryWrites=true&w=majority";

    /**
     * The Mongo Client you will use to interact with your database
     * See https://mongodb.github.io/node-mongodb-native/3.6/api/MongoClient.html for more details
     * In case: '[MONGODB DRIVER] Warning: Current Server Discovery and Monitoring engine is deprecated...'
     * pass option { useUnifiedTopology: true } to the MongoClient constructor.
     * const client =  new MongoClient(uri, {useUnifiedTopology: true})
     */
    const client = new MongoClient(uri, { 
        useNewUrlParser: true, 
        useUnifiedTopology: true, 
        serverApi: ServerApiVersion.v1 
    });


    try {
        // Connect to the MongoDB cluster
        await client.connect();

        // Make the appropriate DB calls
        // await listDatabases(client);

        await findOneListingByName(client, location);

    } catch (e) {
        console.error(e);
    } finally {
        // Close the connection to the MongoDB cluster
        await client.close();
    }
}

// function locationSort(location){
//     loc = location;
//     console.log(loc);
//     main(loc).catch(console.error);
// }
loc = "Thane";
console.log(loc);
main(loc).catch(console.error);

/**
 * Print the names of all available databases
 * @param {MongoClient} client A MongoClient that is connected to a cluster
 */
// async function listDatabases(client){
//   databasesList = await client.db().admin().listDatabases();

//   console.log("Databases:");
//   databasesList.databases.forEach(db => console.log(` - ${db.name}`));
// };

async function findOneListingByName(client, nameOfListing) {
    const result = await client.db("Data").collection("Tweet").findOne({ location: nameOfListing });

    if (result) {
        console.log(`Found a listing in the collection with the name '${nameOfListing}':`);
        console.log(result);
    } else {
        console.log(`No listings found with the name '${nameOfListing}'`);
    }
}


</script>

</html>